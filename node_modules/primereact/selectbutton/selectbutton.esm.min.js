import*as e from"react";import{PrimeReactContext as t}from"primereact/api";import{useMergeProps as n}from"primereact/hooks";import{Tooltip as o}from"primereact/tooltip";import{classNames as l,ObjectUtils as r,DomHandler as a}from"primereact/utils";import{ComponentBase as i}from"primereact/componentbase";import{Ripple as u}from"primereact/ripple";function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s.apply(this,arguments)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e){if(Array.isArray(e))return p(e)}function m(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e){return c(e)||m(e)||d(e)||f()}var v=i.extend({defaultProps:{__TYPE:"SelectButton",id:null,value:null,options:null,optionLabel:null,optionValue:null,optionDisabled:null,tabIndex:null,multiple:!1,unselectable:!0,allowEmpty:!0,disabled:!1,style:null,className:null,dataKey:null,tooltip:null,tooltipOptions:null,itemTemplate:null,onChange:null,children:void 0},css:{classes:{root:function(e){return l("p-selectbutton p-buttonset p-component",e.props.className)},button:function(e){var t=e.itemProps;return l("p-button p-component",{"p-highlight":t.selected,"p-disabled":t.disabled,"p-focus":e.focusedState})},label:"p-button-label p-c"}}});function y(e){if(Array.isArray(e))return e}function g(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,l,r,a,i=[],u=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(o=r.call(n)).done)&&(i.push(o.value),i.length!==t);u=!0);}catch(e){s=!0,l=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw l}}return i}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var E=e.memo((function(t){var o,a,i,s=e.useState(!1),p=(a=2,y(o=s)||g(o,a)||d(o,a)||h()),c=p[0],m=p[1],f=n(),b=t.ptm,v=t.cx,E=function(e){return b(e,{hostName:t.hostName,context:{selected:t.selected,disabled:t.disabled,option:t.option}})},S=function(e){t.onClick&&t.onClick({originalEvent:e,option:t.option})},N=(i=f({className:v("label")},E("label")),t.template?r.getJSXElement(t.template,t.option):e.createElement("span",i,t.label)),D=f({className:l(t.className,v("button",{itemProps:t,focusedState:c})),role:"button","aria-label":t.label,"aria-pressed":t.selected,onClick:S,onKeyDown:function(e){32===e.which&&(S(e),e.preventDefault())},tabIndex:t.tabIndex,onFocus:function(){m(!0)},onBlur:function(){m(!1)}},E("button"));return e.createElement("div",D,N,!t.disabled&&e.createElement(u,null))}));E.displayName="SelectButtonItem";var S=e.memo(e.forwardRef((function(l,i){var u=n(),p=e.useContext(t),c=v.getProps(l,p),m=e.useRef(null),d=v.setMetaData({props:c}),f=d.ptm,y=d.cx,g=function(e){if(!c.disabled&&!N(e.option)){var t=D(e.option);if(!t||c.unselectable&&c.allowEmpty){var n,o=S(e.option);if(c.multiple){var l=c.value?b(c.value):[];n=t?l.filter((function(e){return!r.equals(e,o,c.dataKey)})):[].concat(b(l),[o])}else n=t?null:o;c.onChange&&c.onChange({originalEvent:e.originalEvent,value:n,stopPropagation:function(){e.originalEvent.stopPropagation()},preventDefault:function(){e.originalEvent.preventDefault()},target:{name:c.name,id:c.id,value:n}})}}},h=function(e){return c.optionLabel?r.resolveFieldData(e,c.optionLabel):e&&void 0!==e.label?e.label:e},S=function(e){return c.optionValue?r.resolveFieldData(e,c.optionValue):e&&void 0!==e.value?e.value:e},N=function(e){return c.optionDisabled?r.isFunction(c.optionDisabled)?c.optionDisabled(e):r.resolveFieldData(e,c.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled},D=function(e){var t=S(e);return c.multiple?!(!c.value||!c.value.length)&&c.value.some((function(e){return r.equals(e,t,c.dataKey)})):r.equals(c.value,t,c.dataKey)};e.useImperativeHandle(i,(function(){return{props:c,focus:function(){return a.focusFirstElement(m.current)},getElement:function(){return m.current}}}));var w=r.isNotEmpty(c.tooltip),x=c.options&&c.options.length?c.options.map((function(t,n){var o=c.disabled||N(t),l=h(t),r=o?null:0,a=D(t);return e.createElement(E,{hostName:"SelectButton",key:l+"_"+n,label:l,className:t.className,option:t,onClick:g,template:c.itemTemplate,selected:a,tabIndex:r,disabled:o,ptm:f,cx:y})})):null,I=u({ref:m,id:c.id,className:y("root"),style:c.style,role:"group"},v.getOtherProps(c),f("root"));return e.createElement(e.Fragment,null,e.createElement("div",I,x),w&&e.createElement(o,s({target:m,content:c.tooltip},c.tooltipOptions,{pt:f("tooltip")})))})));S.displayName="SelectButton";export{S as SelectButton};
