import*as e from"react";import{PrimeReactContext as n}from"primereact/api";import{ComponentBase as t,useHandleStyle as r}from"primereact/componentbase";import{useMergeProps as o}from"primereact/hooks";import{BanIcon as a}from"primereact/icons/ban";import{StarIcon as i}from"primereact/icons/star";import{StarFillIcon as l}from"primereact/icons/starfill";import{Tooltip as c}from"primereact/tooltip";import{classNames as p,ObjectUtils as u,IconUtils as s}from"primereact/utils";function m(){return m=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},m.apply(this,arguments)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(e,n){if("object"!==f(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function g(e){var n=y(e,"string");return"symbol"===f(n)?n:String(n)}var v=t.extend({defaultProps:{__TYPE:"Rating",id:null,value:null,disabled:!1,readOnly:!1,stars:5,cancel:!0,style:null,className:null,tooltip:null,tooltipOptions:null,onChange:null,onIcon:null,offIcon:null,cancelIcon:null,cancelIconProps:null,onIconProps:null,offIconProps:null,children:void 0},css:{classes:{onIcon:"p-rating-icon",item:function(e){return p("p-rating-item",{"p-rating-item-active":e.active})},cancelIcon:"p-rating-icon p-rating-cancel",cancelItem:"p-rating-item p-rating-cancel-item",root:function(e){var n=e.props;return p("p-rating",{"p-disabled":n.disabled,"p-readonly":n.readOnly},n.className)}},styles:"\n@layer primereact {\n    .p-rating {\n        display: flex;\n        align-items: center;\n    }\n    \n    .p-rating-item {\n        display: inline-flex;\n        align-items: center;\n        cursor: pointer;\n    }\n    \n    .p-rating.p-readonly .p-rating-item {\n        cursor: default;\n    }\n}\n"}});function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){var r,o,a;r=e,a=t[n],(o=g(o=n))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=e.memo(e.forwardRef((function(t,p){var f=o(),y=e.useContext(n),g=v.getProps(t,y),b=e.useRef(null),O=v.setMetaData({props:g}),I=O.ptm,P=O.cx;r(v.css.styles,O.isUnstyled,{name:"rating"});var E=function(e,n){return I(n,{context:{active:e<=g.value}})},h=!g.disabled&&!g.readOnly,j=h?0:null,w=function(e,n){h&&g.onChange&&g.onChange({originalEvent:e,value:n,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},target:{name:g.name,id:g.id,value:n}}),e.preventDefault()},D=function(e){h&&g.onChange&&g.onChange({originalEvent:e,value:null,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},target:{name:g.name,id:g.id,value:null}}),e.preventDefault()},S=function(e,n){"Enter"===e.key&&w(e,n)},N=function(e){"Enter"===e.key&&D(e)};e.useImperativeHandle(p,(function(){return{props:g,getElement:function(){return b.current}}}));var x=u.isNotEmpty(g.tooltip),k=f({ref:b,id:g.id,className:P("root"),style:g.style},v.getOtherProps(g),I("root")),C=function(){if(g.cancel){var n=f({className:P("cancelIcon")},I("cancelIcon")),t=s.getJSXIcon(g.cancelIcon||e.createElement(a,n),d(d({},n),g.cancelIconProps),{props:g}),r=f({className:P("cancelItem"),onClick:D,tabIndex:j,onKeyDown:N},I("cancelItem"));return e.createElement("div",r,t)}return null}(),R=Array.from({length:g.stars},(function(e,n){return n+1})).map((function(n){var t=n<=g.value,r=f({className:P("onIcon")},E(g.value,"onIcon")),o=f({className:P("onIcon")},E(g.value,"offIcon")),a=s.getJSXIcon((t?{type:g.onIcon||e.createElement(l,r)}:{type:g.offIcon||e.createElement(i,o)}).type,d({},t?r:o),{props:g}),c=f({key:n,className:P("item",{active:t}),tabIndex:j,onClick:function(e){return w(e,n)},onKeyDown:function(e){return S(e,n)}},E(g.value,"item"));return e.createElement("div",m({key:n},c),a)}));return e.createElement(e.Fragment,null,e.createElement("div",k,C,R),x&&e.createElement(c,m({target:b,content:g.tooltip},g.tooltipOptions,{pt:I("tooltip")})))})));O.displayName="Rating";export{O as Rating};
